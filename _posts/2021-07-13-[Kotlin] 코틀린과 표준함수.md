---

title : "[Kotlin] ì½”í‹€ë¦°ê³¼ í‘œì¤€í•¨ìˆ˜"
excerpt : "kotlin let(), apply(), with(), also(), run() ê³µë¶€"

categories:
  - Android
tags :
  - Kotlin
---

> í´ë¡œì €

: ëŒë‹¤ì‹ìœ¼ë¡œ í‘œí˜„ëœ ë‚´ë¶€ í•¨ìˆ˜ì—ì„œ ì™¸ë¶€ ë²”ìœ„ì— ì„ ì–¸ëœ ë³€ìˆ˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê°œë…

ëŒë‹¤ì‹ ì•ˆì— ìˆëŠ” ì™¸ë¶€ ë³€ìˆ˜ëŠ” ê°’ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ ëŒë‹¤ê°€ í¬íší•œ ë³€ìˆ˜ ! 


```kotlin
fun main() {
	val calc = Calc()
	var result = 0 //ì™¸ë¶€ë³€ìˆ˜ 
	calc.addNum(2,3) { x, y -> result = x + y } //resultì˜ ê²°ê³¼ê°€  í•¨ìˆ˜ ì™¸ë¶€ì˜ resultì— ë°˜ì˜ë¨ 
	println(result) // 5
}

class Calc(){
	fun addNum(a: Int, b: Int, add: (Int, Int) -> Unit){ //ëŒë‹¤ì‹ì—ì„œëŠ” ë°˜í™˜ê°’ x
		add(a,b)
	}
}
```

---

> ì½”í‹€ë¦°ì˜ í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ í•¨ìˆ˜

- let()
- apply()
- with()
- also()
- run()

> let()

: Të¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì•„ blockìœ¼ë¡œ ë„˜ê¸°ê³   blockì˜ ê²°ê³¼ê°’  Rì„ ë°˜í™˜ 

```kotlin
//T : ì‚¬ìš©ìš”ì†Œ, R : ë°˜í™˜ìš”ì†Œ 
public inline fun<T, R> T.let(block: (T) -> R): R{ ... return block(this)}
```

```kotlin
fun main() {
	val score : Int? = 32
	//var score = null

	fun checkScore(){
		if(score != null) {
			println("Score: $score")
		}
	}

	fun checkScoreLet(){
		score?.let{ println("Score: $it") } //scoreë¥¼ ë°›ì•„ì„œ itìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ  
		val str = score.let { it.toString() }
		println(str)
	}

	checkScore()
	checkScoreLet()
}
```

- Letí•¨ìˆ˜ì˜ ì²´ì´ë‹

```kotlin
fun main() {
	var a = 1
	val b = 2

	a = a.let { it + 2 }.let { //aì—ë‹¤ê°€ 2 ë”í•œ ê²°ê³¼ê°’ì— letì„ ë°”ë¡œ ì‚¬ìš©í•´ì„œ {}ì•ˆì˜ ë‚´ìš©ì„ ì‹¤í–‰
		println("a = $a")//3 ì¶œë ¥ í›„ 
		val i = it + b // 2ë¥¼ ë”í•¨
		i  //ê²°ê³¼ê°’ì´ aì— ë°˜ì˜ë¨ 
	}
	println(a) //5 
}
```

- ì¤‘ì²© ì‚¬ìš©

```kotlin
var x = "Kotlin"
x.let { outer -> //itì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ëª…ì‹œì  ì´ë¦„ ì‚¬ìš© 
		outer.let { inner ->
				print("Inner is $inner and outer is $outer")
		}
}
```

- ë°˜í™˜ê°’ì€ ë°”ê¹¥ìª½ì˜ ëŒë‹¤ì‹ì—ë§Œ ì ìš©

```kotlin
var x = "Kotlin"
x = x.let { outer -> // x ì— letì•ˆì˜ ë‚´ìš©ì„ í• ë‹¹  
		outer.let { inner ->
				print("Inner is $inner and outer is $outer")
				"Inner String"//í• ë‹¹ x 
		}
		"Outer String" //ì´ê²ƒë§Œ xì—í• ë‹¹ë¨ 
}
```

- ì•ˆë“œë¡œì´ë“œì—ì„œì˜ let í™œìš©

letì„ ì‚¬ìš©í•˜ì§€ ì•Šì„ ë•Œ 

```kotlin
val padding = TypedValue.applyDimension(
			TypedValue.COMPLEX_UNIT_DIP, 16f, resources.displayMetrics).toInt()
setPadding(padding,0,padding, 0)
```

letì„ ì‚¬ìš© 

```kotlin
TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 16f, 
			resouces.displayMetrics).toInt().let{ //padding -> í•´ì„œ paddingìœ¼ë¡œ ì‚¬ìš©í• ìˆ˜ë„ ìˆìŒ 
				setPadding(it,0,it,0)//ì¸ìê°€ í•œê°œì´ê¸° ë•Œë¬¸ì— it ì‚¬ìš© 
}
```

- null ê²€ì‚¬

safeCall ê³¼ ê°™ì´ ì‚¬ìš© ! 

```kotlin
val obj : String?

obj?.let { //nullì´ ì•„ë‹Œ ê²½ìš°ì—ë§Œ ìˆ˜í–‰ 
	Toast.makeText(applicationContext, it, Toast.LENGTH_LONG).show()
}
```

- elseë¬¸ì´ í¬í•¨ëœ ë¬¸ì¥ ëŒ€ì²´

```kotlin
val firstName : String? 
firstName?.let { print("$it") } ?: print("0") //nullì´ ì•„ë‹Œê²½ìš°ë§Œ let ë¸”ë¡ì„ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì—, nullì´ë¼ë©´ 0ì„ ì¶œë ¥ 
```

---

> also()

: í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê°ì²´ Të¥¼ ì´ì–´ì§€ëŠ” blockì— ì „ë‹¬í•˜ê³  ê°ì²´ T ìì²´ë¥¼ ë°˜í™˜ 

```kotlin
public inline fun <T> T.also(block: (T) -> Unit) : T {block(this); return this }
```

```kotlin
var m = 1
m = m.also{ it + 3 } //ë¸”ë¡ ì•ˆì˜ ì½”ë“œ ìˆ˜í–‰ê²°ê³¼ì™€ ìƒê´€ì—†ì´ ì›ë³¸ ê°ì²´ mì„ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— 1ì´ ë°˜í™˜ë¨ 
println(m) //1 
```

- letê³¼ also

```kotlin
fun main(){
    data class Person(var name: String, var skills : String){}
    var person = Person("kildong", "Kotlin")

    val a = person.let {
        it.skills = "Android" //personê°ì²´ì˜ skillsê°€ Androidë¡œ ë³€ê²½ë¨ 
        "success" //aì— successê°€ ë°˜ì˜ 
    }
    println(person)// Person(name=kildong, skills=Java)
    println("a: $a") // a: success

    val b = person.also{
        it.skills = "Java" //personê°ì²´ì˜ skillsê°€ Javaë¡œ ë³€ê²½ë¨ 
        "success" //ê°ì²´ person ìì²´ë¥¼ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— bì— successê°€ ë°˜ì˜ë˜ì§€ ì•ŠìŒ
    }
    println(person)// Person(name="kildong", skills="Java")
    println("b: $b") // Person(name="kildong", skills="Java")
}
```

- ì•ˆë“œë¡œì´ë“œì—ì„œì˜ letê³¼ also í™œìš©

letê³¼ alsoë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì„ ë•Œ 

```kotlin
fun makeDir(path: String) : File {
	val result = File(path)
	result.mkdirs()
	return result
}
```

letê³¼ alsoë¥¼ ì‚¬ìš©í•  ë•Œ 

```kotlin
//letì€ Fileë¡œ ë§Œë“¤ê³  alsoë¥¼ í†µí•´ ë„˜ê²¨ ë””ë ‰í† ë¦¬ë¡œ ë³€ê²½ëœë‹¤. 
//ì´ë•Œ alsoì—ì„œëŠ” ê²°ê³¼ê°’ì„ ë°˜í™˜í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, ìµœì¢…ì ìœ¼ë¡œ ë””ë ‰í† ë¦¬ ë³€ê²½ê¹Œì§€ ë§ˆì¹œ ê²°ê³¼ê°€ letì—ì„œ ë°˜í™˜ëœë‹¤.  
fun makeDir(path : String) = path.let{File(it)}.also{it.mkdirs()}
```

ğŸ‘  let()ê³¼ also()ì˜ ì°¨ì´ì  ì •ë¦¬ 

â‡’ let() : block ì•ˆì˜ ë‚´ìš©ì„ ì ìš©ì‹œí‚¤ê³ , ê·¸ ê²°ê³¼ ë°˜í™˜

â‡’ also() : block ì•ˆì˜ ë‚´ìš©ë§Œ ì ìš© ì‹œí‚¤ê³  ê²°ê³¼ ë°˜í™˜ x 

---

> apply()

: also()í•¨ìˆ˜ì™€ ë§ˆì°¬ê°€ì§€ë¡œ í˜¸ì¶œí•˜ëŠ” ê°ì²´ Të¥¼ ì´ì–´ì§€ëŠ” blockìœ¼ë¡œ ì „ë‹¬í•˜ê³  ê°ì²´ ìì²´ì¸ thisë¥¼ ë°˜í™˜ 

**í™•ì¥ í•¨ìˆ˜ í˜•íƒœ**ë¡œ ì²˜ë¦¬ë¨ ! â†’ itì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  thisë¡œ ì‚¬ìš© í•˜ì§€ë§Œ thisëŠ” ìƒëµ ê°€ëŠ¥ 

```kotlin
public inline fun <T> T.apply(block: T.() -> Unit) : T { block(); return this }
```

```kotlin
data class Person(var name: String, var skills : String){}
    var person = Person("kildong", "Kotlin")

    //thisëŠ” personì„ ê°€ë¦¬í‚´
    person.apply{ this.skills = "Swift" }
    println(person) //Person(name=kildong, skills=Kotlin)

    val returnObj = person.apply{
        name = "Sean" //this ì—†ì´ ê°ì²´ì˜ ë©¤ë²„ì— ì—¬ëŸ¬ë²ˆ ì ‘ê·¼
        skills = "Java"
    }

    println(person) //Person(name=Sean, skills=Java)
    println(returnObj) //Person(name=Sean, skills=Java)
```

ğŸ‘  also()ì™€ apply()ì˜ ì°¨ì´ì  ì •ë¦¬ 

â‡’ also() : itìœ¼ë¡œ ë°›ê³  ìƒëµí•  ìˆ˜ ì—†ìŒ 

â‡’ apply() : thisë¡œ ë°›ê³  ìƒëµ ê°€ëŠ¥, ë°˜ë³µë˜ëŠ” ê°ì²´ì˜ ë³€ìˆ˜ë¥¼ ë‹¤ë£° ë•Œ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë“¯ [obj.name](http://obj.name) obj.grade ì´ëŸ°ì‹ìœ¼ë¡œ obj í•˜ë‚˜í•˜ë‚˜ ì•ˆì“°ê³  ê± name, gradeë¡œ ë°”ë¡œ ì‚¬ìš© 

- ì•ˆë“œë¡œì´ë“œì—ì„œì˜ apply

applyë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì„ ë•Œ  

```kotlin
val param = LinearLayout.LayoutParams(0, LinearLayout.LayoutParams.WRAP_CONTENT)
param.gravity = Gravity.CENTER_HORIZONTAL
param.weight = 1f
param.topMargin = 100
param.bottomMargin = 100
```

applyë¥¼ ì‚¬ìš©í•  ë•Œ

```kotlin
val param = LinearLayout.LayoutParams(0, LinearLayout.LayoutParams.WRAP_CONTENT).apply {
    gravity = Gravity.CENTER_HORIZONTAL
    weight = 1f
    topMargin = 100
    bottomMargin = 100
}
```

```kotlin
//fun makeDir(path : String) = path.let{File(it)}.also{it.mkdirs()}
File(path).apply { mkdirs() } //ì´ë ‡ê²Œ ê°„ë‹¨í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ 
```

â‡’ letê³¼ alsoë¥¼ ì‚¬ìš©í–ˆë˜ ë¬¸ì¥ì„ â†’ applyí•˜ë‚˜ë§Œ ì‚¬ìš©í•´ì„œ ë” ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŒ 

---

> run()

: ì¸ìê°€ ì—†ëŠ” ìµëª…í•¨ìˆ˜ì²˜ëŸ¼ ë™ì‘í•˜ëŠ” í˜•íƒœì™€ ê°ì²´ì—ì„œ í˜¸ì¶œí•˜ëŠ” í˜•íƒœ ë‘ ê°€ì§€ë¡œ ì‚¬ìš©

```kotlin
public inline fun <R> run(block: ()-> R) : R = return block()
public inline fun <T, R> T.run(block: T.() -> R): R = return block() 
```

```kotlin
fun main() {
	data class Person(var name: String, var skills : String)
    var person = Person("kildong", "Kotlin")

    val returnObj = person.apply{
        name = "Sean"
        skills = "Java"
        "success" //reutrn ë°˜ì˜ ì•ˆë¨ 
    }
    
    println(person) //Person(name=Sean, skills=Java)
    println("returnObj: $returnObj") // returnObj: Person(name=Sean, skills=Java)

    val returnObj2 = person.run(){
        name = "Dooly"
        skills = "C#"
        "success" //return ë°˜ì˜ë¨ 
    }

    println(person) //Person(name=Dooly, skills=C#)
    println("returnObj2: $returnObj2") // returnObj2: success

}
```

ğŸ‘  apply()ì™€ run()ì˜ ì°¨ì´ì  ì •ë¦¬ 

â‡’ apply() : ë¦¬í„´ê°’ ë°˜ì˜ x 

â‡’ run() : ë¦¬í„´ê°’ ë°˜ì˜ o  

---

> with()

: ì¸ìë¡œ ë°›ëŠ” ê°ì²´ë¥¼ ì´ì–´ì§€ëŠ” blockì˜ receiverë¡œ ì „ë‹¬í•˜ë©° ê²°ê³¼ê°’ ë°˜í™˜

run() í•¨ìˆ˜ì™€ ê¸°ëŠ¥ì´ ê±°ì˜ ë™ì¼í•˜ë‹¤. runì˜ ê²½ìš° receiverê°€ ì—†ì§€ë§Œ, with()ì—ì„œëŠ” receiverë¡œ ì „ë‹¬ í•  ê°ì²´ë¥¼ ì²˜ë¦¬

```kotlin
public inline fun <T, R> with(receiver: T, block: T.() -> R) : R = receiver.block()
```

ì„¸ì´í”„ ì½œì€ ì§€ì›í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— letê³¼ ê°™ì´ ì‚¬ìš© 

```kotlin
supportActionBar?.let {
	with(it) { //it = supportActionBar 
			setDisplayHomeAsUpEnabled(true)
			setHomeAsUpIndicator(R.drawable.ic_clear_white)
	}
}
```

letê³¼ with í‘œí˜„ ë³‘í•© = runê³¼ ë™ì¼ 

```kotlin
supportActionBar?.run {
		setDisplayHomeAsUpEnabled(true)
		setHomeAsUpIndicator(R.drawable.ic_clear_white)
}
```

```kotlin
fun main() {
	data class Person(var name: String, var skills : String)
    var person = Person("kildong", "Kotlin")

    val result = with (person){
        name = "Sean"
        skills = "Java"
			//"Hello"
    }
    
    println(person) //Person(name=Sean, skills=Java)
    println("returnObj: $result") // result: kotlin.Unit -> ë°˜í™˜ê°’ì´ ì—†ë‹¤ë©´ Unit ë°˜í™˜, ë°˜í™˜ê°’ì´ ìˆë‹¤ë©´(ì˜ˆì œì—ì„  Hello) Helloë°˜í™˜ 
}
```

---

> use()

: ê°ì²´ë¥¼ ì‚¬ìš©í•œ í›„ close() ë“±ì„ ìë™ì ìœ¼ë¡œ í˜¸ì¶œí•´ì„œ ë‹«ì•„ì¤Œ

```kotlin
public inline fun <T : Closeable?, R> T.use(block: (T) -> R) : R 
or
public inline fun <T : AutoCloseable?, R> T.use(block: (T) -> R) : R
```

ex)íŒŒì¼ ì‚¬ìš©

```kotlin
private fun readFirstLine() : String {
	BufferedReader(Filereader("test.file")).use { return it.readLine() }
}
```

---

> takeIf()ì™€ takeUnless()ì˜ í™œìš©

- takeIf() : ëŒë‹¤ì‹ì´ trueì´ë©´ ê°ì²´ Të¥¼ ë°˜í™˜í•˜ê³  ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° null ë°˜í™˜
- takeUnless() : ëŒë‹¤ì‹ì´ falseì´ë©´ ê°ì²´ Të¥¼ ë°˜í™˜í•˜ê³  ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° nullë°˜í™˜

```kotlin
public inline fun <T> T.takeIf(predicate: (T) -> Boolean): T? 
	= if (predicate(this)) this else null
```

```kotlin
val input = "Kotlin"
val keyword = "in"

input.indexOf(keyword).takeIf { it >= 0 } ?: error("keyword not found")
input.indexOf(keyword).takeUnless { it < 0 } ?: error("keyword not found")
```

---

### ì°¸ê³ 

[https://www.boostcourse.org/mo132/joinLectures/28611](https://www.boostcourse.org/mo132/joinLectures/28611)
